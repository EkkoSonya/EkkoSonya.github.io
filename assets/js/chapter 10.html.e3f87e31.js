"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[690],{3671:(s,a)=>{a.A=(s,a)=>{const t=s.__vccOpts||s;for(const[s,l]of a)t[s]=l;return t}},8499:(s,a,t)=>{t.r(a),t.d(a,{comp:()=>e,data:()=>m});var l=t(7847);const n=[(0,l.Fv)('<ul><li>actor: 对应 policy update</li><li>critic: 对应 policy evaluation 或者 value evaluation</li></ul><figure><img src="http://myimg.ekkosonya.cn/20240830184236.png" alt="20240830184236" tabindex="0" loading="lazy"><figcaption>20240830184236</figcaption></figure><p>显然，是在基于 策略梯度上升 算法的基础上，将对于 Q 值的估计通过一个网络来进行描述，这个便成为 critic, 而对应的策略梯度上升算法就是对应 actor。</p><figure><img src="http://myimg.ekkosonya.cn/20240830184312.png" alt="20240830184312" tabindex="0" loading="lazy"><figcaption>20240830184312</figcaption></figure><h2 id="_1-the-simplest-actor-critic-qac" tabindex="-1"><a class="header-anchor" href="#_1-the-simplest-actor-critic-qac"><span>1. The simplest actor-critic (QAC)</span></a></h2><figure><img src="http://myimg.ekkosonya.cn/20240830184330.png" alt="20240830184330" tabindex="0" loading="lazy"><figcaption>20240830184330</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830184424.png" alt="20240830184424" tabindex="0" loading="lazy"><figcaption>20240830184424</figcaption></figure><h2 id="_2-advantage-actor-critic-a2c" tabindex="-1"><a class="header-anchor" href="#_2-advantage-actor-critic-a2c"><span>2. Advantage actor-critic (A2C)</span></a></h2><p>核心思想：在 QAC 的基础上来引入偏置量(baseline)，从而<strong>减小方差</strong>，提升采样的效率。</p><h3 id="_2-1-baseline" tabindex="-1"><a class="header-anchor" href="#_2-1-baseline"><span>2.1 baseline</span></a></h3><p>在策略梯度算法中引入一个 baseline, 不会影响所求的梯度。<br> 即:</p>',11),(0,l.Lk)("p",{class:"katex-block"},[(0,l.Lk)("span",{class:"katex-display"},[(0,l.Lk)("span",{class:"katex"},[(0,l.Lk)("span",{class:"katex-mathml"},[(0,l.Lk)("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[(0,l.Lk)("semantics",null,[(0,l.Lk)("mtable",{rowspacing:"0.25em",columnalign:"right left",columnspacing:"0em"},[(0,l.Lk)("mtr",null,[(0,l.Lk)("mtd",null,[(0,l.Lk)("mstyle",{scriptlevel:"0",displaystyle:"true"},[(0,l.Lk)("mrow",null,[(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"normal"},"▽"),(0,l.Lk)("mi",null,"θ")]),(0,l.Lk)("mi",null,"J"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"θ"),(0,l.Lk)("mo",{stretchy:"false"},")")])])]),(0,l.Lk)("mtd",null,[(0,l.Lk)("mstyle",{scriptlevel:"0",displaystyle:"true"},[(0,l.Lk)("mrow",null,[(0,l.Lk)("mrow"),(0,l.Lk)("mo",null,"="),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"double-struck"},"E"),(0,l.Lk)("mrow",null,[(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"η"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mtext",null," "),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"π")])]),(0,l.Lk)("mo",{stretchy:"false"},"["),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"normal"},"▽"),(0,l.Lk)("mi",null,"θ")]),(0,l.Lk)("mi",null,"ln"),(0,l.Lk)("mo",null,"⁡"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mi",{mathvariant:"normal"},"∣"),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mi",null,"θ"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",null,"q"),(0,l.Lk)("mi",null,"π")]),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("mo",{stretchy:"false"},"]")])])])]),(0,l.Lk)("mtr",null,[(0,l.Lk)("mtd",null,[(0,l.Lk)("mstyle",{scriptlevel:"0",displaystyle:"true"},[(0,l.Lk)("mrow")])]),(0,l.Lk)("mtd",null,[(0,l.Lk)("mstyle",{scriptlevel:"0",displaystyle:"true"},[(0,l.Lk)("mrow",null,[(0,l.Lk)("mrow"),(0,l.Lk)("mo",null,"="),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"double-struck"},"E"),(0,l.Lk)("mrow",null,[(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"η"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mtext",null," "),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"π")])]),(0,l.Lk)("mo",{stretchy:"false"},"["),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"normal"},"▽"),(0,l.Lk)("mi",null,"θ")]),(0,l.Lk)("mi",null,"ln"),(0,l.Lk)("mo",null,"⁡"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mi",{mathvariant:"normal"},"∣"),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mi",null,"θ"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",null,"q"),(0,l.Lk)("mi",null,"π")]),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("mo",null,"−"),(0,l.Lk)("mstyle",{mathcolor:"blue"},[(0,l.Lk)("mi",null,"b"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{stretchy:"false"},")")]),(0,l.Lk)("mo",{stretchy:"false"},"]")])])])])]),(0,l.Lk)("annotation",{encoding:"application/x-tex"}," \\begin{aligned} \\triangledown_\\theta J(\\theta) & = \\mathbb{E}_{S \\sim \\eta,~A \\sim \\pi}[\\triangledown_\\theta \\ln(A|S,\\theta)q_\\pi(S,A)] \\\\ & = \\mathbb{E}_{S \\sim \\eta,~A \\sim \\pi}[\\triangledown_\\theta \\ln(A|S,\\theta)q_\\pi(S,A) - \\textcolor{blue}{b(S)}] \\end{aligned} ")])])]),(0,l.Lk)("span",{class:"katex-html","aria-hidden":"true"},[(0,l.Lk)("span",{class:"base"},[(0,l.Lk)("span",{class:"strut",style:{height:"3em","vertical-align":"-1.25em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mtable"},[(0,l.Lk)("span",{class:"col-align-r"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"1.75em"}},[(0,l.Lk)("span",{style:{top:"-3.91em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"3em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord amsrm"},"▽"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3361em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"θ")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.09618em"}},"J"),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"θ"),(0,l.Lk)("span",{class:"mclose"},")")])]),(0,l.Lk)("span",{style:{top:"-2.41em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"3em"}}),(0,l.Lk)("span",{class:"mord"})])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"1.25em"}},[(0,l.Lk)("span")])])])]),(0,l.Lk)("span",{class:"col-align-l"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"1.75em"}},[(0,l.Lk)("span",{style:{top:"-3.91em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"3em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord"}),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),(0,l.Lk)("span",{class:"mrel"},"="),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathbb"},"E"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3283em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"η"),(0,l.Lk)("span",{class:"mpunct mtight"},","),(0,l.Lk)("span",{class:"mspace nobreak mtight"},[(0,l.Lk)("span",{class:"mtight"}," ")]),(0,l.Lk)("span",{class:"mord mathnormal mtight"},"A"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.2861em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"["),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord amsrm"},"▽"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3361em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"θ")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mop"},"ln"),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal"},"A"),(0,l.Lk)("span",{class:"mord"},"∣"),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mpunct"},","),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"θ"),(0,l.Lk)("span",{class:"mclose"},")"),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"q"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.1514em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mpunct"},","),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mord mathnormal"},"A"),(0,l.Lk)("span",{class:"mclose"},")]")])]),(0,l.Lk)("span",{style:{top:"-2.41em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"3em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord"}),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),(0,l.Lk)("span",{class:"mrel"},"="),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathbb"},"E"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3283em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"η"),(0,l.Lk)("span",{class:"mpunct mtight"},","),(0,l.Lk)("span",{class:"mspace nobreak mtight"},[(0,l.Lk)("span",{class:"mtight"}," ")]),(0,l.Lk)("span",{class:"mord mathnormal mtight"},"A"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.2861em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"["),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord amsrm"},"▽"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3361em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"θ")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mop"},"ln"),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal"},"A"),(0,l.Lk)("span",{class:"mord"},"∣"),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mpunct"},","),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"θ"),(0,l.Lk)("span",{class:"mclose"},")"),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"q"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.1514em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mpunct"},","),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mord mathnormal"},"A"),(0,l.Lk)("span",{class:"mclose"},")"),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),(0,l.Lk)("span",{class:"mbin"},"−"),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),(0,l.Lk)("span",{class:"mord mathnormal",style:{color:"blue"}},"b"),(0,l.Lk)("span",{class:"mopen",style:{color:"blue"}},"("),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em",color:"blue"}},"S"),(0,l.Lk)("span",{class:"mclose",style:{color:"blue"}},")"),(0,l.Lk)("span",{class:"mclose"},"]")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"1.25em"}},[(0,l.Lk)("span")])])])])])])])])])])],-1),(0,l.Lk)("p",null,[(0,l.eW)("证明:"),(0,l.Lk)("br"),(0,l.eW)(" 要证明加入baseline成立，只需要保证:")],-1),(0,l.Lk)("p",{class:"katex-block"},[(0,l.Lk)("span",{class:"katex-display"},[(0,l.Lk)("span",{class:"katex"},[(0,l.Lk)("span",{class:"katex-mathml"},[(0,l.Lk)("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[(0,l.Lk)("semantics",null,[(0,l.Lk)("mrow",null,[(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"double-struck"},"E"),(0,l.Lk)("mrow",null,[(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"η"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mtext",null," "),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mo",null,"∼"),(0,l.Lk)("mi",null,"π")])]),(0,l.Lk)("mo",{stretchy:"false"},"["),(0,l.Lk)("msub",null,[(0,l.Lk)("mi",{mathvariant:"normal"},"▽"),(0,l.Lk)("mi",null,"θ")]),(0,l.Lk)("mi",null,"ln"),(0,l.Lk)("mo",null,"⁡"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"A"),(0,l.Lk)("mi",{mathvariant:"normal"},"∣"),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{separator:"true"},","),(0,l.Lk)("mi",null,"θ"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("mi",null,"b"),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"S"),(0,l.Lk)("mo",{stretchy:"false"},")"),(0,l.Lk)("mo",{stretchy:"false"},"]"),(0,l.Lk)("mo",null,"="),(0,l.Lk)("mn",null,"0")]),(0,l.Lk)("annotation",{encoding:"application/x-tex"}," \\mathbb{E}_{S \\sim \\eta,~A \\sim \\pi}[\\triangledown_\\theta \\ln(A|S,\\theta)b(S)] = 0 ")])])]),(0,l.Lk)("span",{class:"katex-html","aria-hidden":"true"},[(0,l.Lk)("span",{class:"base"},[(0,l.Lk)("span",{class:"strut",style:{height:"1.0361em","vertical-align":"-0.2861em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathbb"},"E"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3283em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"η"),(0,l.Lk)("span",{class:"mpunct mtight"},","),(0,l.Lk)("span",{class:"mspace nobreak mtight"},[(0,l.Lk)("span",{class:"mtight"}," ")]),(0,l.Lk)("span",{class:"mord mathnormal mtight"},"A"),(0,l.Lk)("span",{class:"mrel mtight"},"∼"),(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.2861em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"["),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord amsrm"},"▽"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.3361em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"θ")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mop"},"ln"),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal"},"A"),(0,l.Lk)("span",{class:"mord"},"∣"),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mpunct"},","),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"θ"),(0,l.Lk)("span",{class:"mclose"},")"),(0,l.Lk)("span",{class:"mord mathnormal"},"b"),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),(0,l.Lk)("span",{class:"mclose"},")]"),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),(0,l.Lk)("span",{class:"mrel"},"="),(0,l.Lk)("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),(0,l.Lk)("span",{class:"base"},[(0,l.Lk)("span",{class:"strut",style:{height:"0.6444em"}}),(0,l.Lk)("span",{class:"mord"},"0")])])])])],-1),(0,l.Fv)('<figure><img src="http://myimg.ekkosonya.cn/20240830185127.png" alt="20240830185127" tabindex="0" loading="lazy"><figcaption>20240830185127</figcaption></figure><p>作用:<br><img src="http://myimg.ekkosonya.cn/20240830185207.png" alt="20240830185207" loading="lazy"></p><p>因此，我们需要找到一个 baseline 来保证这个梯度的方差最小即可。</p><h3 id="_2-2-最好的-baseline" tabindex="-1"><a class="header-anchor" href="#_2-2-最好的-baseline"><span>2.2 最好的 baseline</span></a></h3><figure><img src="http://myimg.ekkosonya.cn/20240830185324.png" alt="20240830185324" tabindex="0" loading="lazy"><figcaption>20240830185324</figcaption></figure>',5),(0,l.Lk)("p",null,[(0,l.eW)("在实际情况中，我们通常将 baseline 设置为 "),(0,l.Lk)("span",{class:"katex"},[(0,l.Lk)("span",{class:"katex-mathml"},[(0,l.Lk)("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[(0,l.Lk)("semantics",null,[(0,l.Lk)("mrow",null,[(0,l.Lk)("msub",null,[(0,l.Lk)("mi",null,"v"),(0,l.Lk)("mi",null,"π")]),(0,l.Lk)("mo",{stretchy:"false"},"("),(0,l.Lk)("mi",null,"s"),(0,l.Lk)("mo",{stretchy:"false"},")")]),(0,l.Lk)("annotation",{encoding:"application/x-tex"},"v_\\pi(s)")])])]),(0,l.Lk)("span",{class:"katex-html","aria-hidden":"true"},[(0,l.Lk)("span",{class:"base"},[(0,l.Lk)("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),(0,l.Lk)("span",{class:"mord"},[(0,l.Lk)("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),(0,l.Lk)("span",{class:"msupsub"},[(0,l.Lk)("span",{class:"vlist-t vlist-t2"},[(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.1514em"}},[(0,l.Lk)("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[(0,l.Lk)("span",{class:"pstrut",style:{height:"2.7em"}}),(0,l.Lk)("span",{class:"sizing reset-size6 size3 mtight"},[(0,l.Lk)("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"π")])])]),(0,l.Lk)("span",{class:"vlist-s"},"​")]),(0,l.Lk)("span",{class:"vlist-r"},[(0,l.Lk)("span",{class:"vlist",style:{height:"0.15em"}},[(0,l.Lk)("span")])])])])]),(0,l.Lk)("span",{class:"mopen"},"("),(0,l.Lk)("span",{class:"mord mathnormal"},"s"),(0,l.Lk)("span",{class:"mclose"},")")])])])],-1),(0,l.Fv)('<h3 id="_2-3-对应算法" tabindex="-1"><a class="header-anchor" href="#_2-3-对应算法"><span>2.3 对应算法</span></a></h3><figure><img src="http://myimg.ekkosonya.cn/20240830185537.png" alt="20240830185537" tabindex="0" loading="lazy"><figcaption>20240830185537</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830185556.png" alt="20240830185556" tabindex="0" loading="lazy"><figcaption>20240830185556</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830185629.png" alt="20240830185629" tabindex="0" loading="lazy"><figcaption>20240830185629</figcaption></figure><h2 id="_3-off-policy-actor-critic" tabindex="-1"><a class="header-anchor" href="#_3-off-policy-actor-critic"><span>3. off-policy actor-critic</span></a></h2><p>通过 重要性采样 的方法，将处于 另一分布下 的策略所采集的数据来 运用到 策略更新 中。</p><h3 id="_3-1-重要性采样-importance-sampling" tabindex="-1"><a class="header-anchor" href="#_3-1-重要性采样-importance-sampling"><span>3.1 重要性采样 (Importance sampling)</span></a></h3><figure><img src="http://myimg.ekkosonya.cn/20240830200056.png" alt="20240830200056" tabindex="0" loading="lazy"><figcaption>20240830200056</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200118.png" alt="20240830200118" tabindex="0" loading="lazy"><figcaption>20240830200118</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200138.png" alt="20240830200138" tabindex="0" loading="lazy"><figcaption>20240830200138</figcaption></figure><h3 id="_3-2-off-policy" tabindex="-1"><a class="header-anchor" href="#_3-2-off-policy"><span>3.2 off-policy</span></a></h3><figure><img src="http://myimg.ekkosonya.cn/20240830200248.png" alt="20240830200248" tabindex="0" loading="lazy"><figcaption>20240830200248</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200305.png" alt="20240830200305" tabindex="0" loading="lazy"><figcaption>20240830200305</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200320.png" alt="20240830200320" tabindex="0" loading="lazy"><figcaption>20240830200320</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200343.png" alt="20240830200343" tabindex="0" loading="lazy"><figcaption>20240830200343</figcaption></figure><h3 id="_3-3-伪代码" tabindex="-1"><a class="header-anchor" href="#_3-3-伪代码"><span>3.3 伪代码</span></a></h3><figure><img src="http://myimg.ekkosonya.cn/20240830200406.png" alt="20240830200406" tabindex="0" loading="lazy"><figcaption>20240830200406</figcaption></figure><h2 id="_4-deterministic-actor-critic-dpg" tabindex="-1"><a class="header-anchor" href="#_4-deterministic-actor-critic-dpg"><span>4. Deterministic actor-critic (DPG)</span></a></h2><figure><img src="http://myimg.ekkosonya.cn/![20240830200527](httpmyimg.ekkosonya.cn20240830200527.png).png" alt="1234" tabindex="0" loading="lazy"><figcaption>1234</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200608.png" alt="20240830200608" tabindex="0" loading="lazy"><figcaption>20240830200608</figcaption></figure><figure><img src="http://myimg.ekkosonya.cn/20240830200624.png" alt="20240830200624" tabindex="0" loading="lazy"><figcaption>20240830200624</figcaption></figure>',21)],i={},e=(0,t(3671).A)(i,[["render",function(s,a){return(0,l.uX)(),(0,l.CE)("div",null,n)}]]),m=JSON.parse('{"path":"/academic/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/chapter%2010.html","title":"RL10 - Actor-Critic 方法","lang":"zh-CN","frontmatter":{"title":"RL10 - Actor-Critic 方法","date":"2024-08-26T00:00:00.000Z","category":["academic"],"tag":["强化学习"],"order":-0.5,"description":" actor: 对应 policy update critic: 对应 policy evaluation 或者 value evaluation 2024083018423620240830184236 显然，是在基于 策略梯度上升 算法的基础上，将对于 Q 值的估计通过一个网络来进行描述，这个便成为 critic, 而对应的策略梯度上升算法就是对应...","head":[["meta",{"property":"og:url","content":"http://ekkosonya.cn/academic/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/chapter%2010.html"}],["meta",{"property":"og:site_name","content":"EkkoSonya\'s Blog"}],["meta",{"property":"og:title","content":"RL10 - Actor-Critic 方法"}],["meta",{"property":"og:description","content":" actor: 对应 policy update critic: 对应 policy evaluation 或者 value evaluation 2024083018423620240830184236 显然，是在基于 策略梯度上升 算法的基础上，将对于 Q 值的估计通过一个网络来进行描述，这个便成为 critic, 而对应的策略梯度上升算法就是对应..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"http://myimg.ekkosonya.cn/20240830184236.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-30T12:11:17.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"RL10 - Actor-Critic 方法"}],["meta",{"property":"article:author","content":"EkkoSonya"}],["meta",{"property":"article:tag","content":"强化学习"}],["meta",{"property":"article:published_time","content":"2024-08-26T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-30T12:11:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"RL10 - Actor-Critic 方法\\",\\"image\\":[\\"http://myimg.ekkosonya.cn/20240830184236.png\\",\\"http://myimg.ekkosonya.cn/20240830184312.png\\",\\"http://myimg.ekkosonya.cn/20240830184330.png\\",\\"http://myimg.ekkosonya.cn/20240830184424.png\\",\\"http://myimg.ekkosonya.cn/20240830185127.png\\",\\"http://myimg.ekkosonya.cn/20240830185207.png\\",\\"http://myimg.ekkosonya.cn/20240830185324.png\\",\\"http://myimg.ekkosonya.cn/20240830185537.png\\",\\"http://myimg.ekkosonya.cn/20240830185556.png\\",\\"http://myimg.ekkosonya.cn/20240830185629.png\\",\\"http://myimg.ekkosonya.cn/20240830200056.png\\",\\"http://myimg.ekkosonya.cn/20240830200118.png\\",\\"http://myimg.ekkosonya.cn/20240830200138.png\\",\\"http://myimg.ekkosonya.cn/20240830200248.png\\",\\"http://myimg.ekkosonya.cn/20240830200305.png\\",\\"http://myimg.ekkosonya.cn/20240830200320.png\\",\\"http://myimg.ekkosonya.cn/20240830200343.png\\",\\"http://myimg.ekkosonya.cn/20240830200406.png\\",\\"http://myimg.ekkosonya.cn/![20240830200527](httpmyimg.ekkosonya.cn20240830200527.png\\",\\"http://myimg.ekkosonya.cn/20240830200608.png\\",\\"http://myimg.ekkosonya.cn/20240830200624.png\\"],\\"datePublished\\":\\"2024-08-26T00:00:00.000Z\\",\\"dateModified\\":\\"2024-08-30T12:11:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"EkkoSonya\\",\\"url\\":\\"http://ekkosonya.cn\\"}]}"]]},"headers":[{"level":2,"title":"1. The simplest actor-critic (QAC)","slug":"_1-the-simplest-actor-critic-qac","link":"#_1-the-simplest-actor-critic-qac","children":[]},{"level":2,"title":"2. Advantage actor-critic (A2C)","slug":"_2-advantage-actor-critic-a2c","link":"#_2-advantage-actor-critic-a2c","children":[{"level":3,"title":"2.1 baseline","slug":"_2-1-baseline","link":"#_2-1-baseline","children":[]},{"level":3,"title":"2.2 最好的 baseline","slug":"_2-2-最好的-baseline","link":"#_2-2-最好的-baseline","children":[]},{"level":3,"title":"2.3 对应算法","slug":"_2-3-对应算法","link":"#_2-3-对应算法","children":[]}]},{"level":2,"title":"3. off-policy actor-critic","slug":"_3-off-policy-actor-critic","link":"#_3-off-policy-actor-critic","children":[{"level":3,"title":"3.1 重要性采样 (Importance sampling)","slug":"_3-1-重要性采样-importance-sampling","link":"#_3-1-重要性采样-importance-sampling","children":[]},{"level":3,"title":"3.2 off-policy","slug":"_3-2-off-policy","link":"#_3-2-off-policy","children":[]},{"level":3,"title":"3.3 伪代码","slug":"_3-3-伪代码","link":"#_3-3-伪代码","children":[]}]},{"level":2,"title":"4. Deterministic actor-critic (DPG)","slug":"_4-deterministic-actor-critic-dpg","link":"#_4-deterministic-actor-critic-dpg","children":[]}],"git":{"createdTime":1725019877000,"updatedTime":1725019877000,"contributors":[{"name":"EkkoSonya","email":"ekkosonya@163.com","commits":1}]},"readingTime":{"minutes":1.41,"words":424},"filePathRelative":"academic/强化学习/chapter 10.md","localizedDate":"2024年8月26日","excerpt":"<ul>\\n<li>actor: 对应 policy update</li>\\n<li>critic: 对应 policy evaluation 或者 value evaluation</li>\\n</ul>\\n<figure><img src=\\"http://myimg.ekkosonya.cn/20240830184236.png\\" alt=\\"20240830184236\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>20240830184236</figcaption></figure>\\n<p>显然，是在基于 策略梯度上升 算法的基础上，将对于 Q 值的估计通过一个网络来进行描述，这个便成为 critic, 而对应的策略梯度上升算法就是对应 actor。</p>","autoDesc":true}')}}]);